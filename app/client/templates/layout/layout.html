<template name="layout_main">
	
	<header class="main">
		<h1 flex>MyCoinDesk</h1>

		<div class="portfolio">
			{{#if currentUser}}
				<span class="wealth">{{portfolioTotal false}}</span>
				<span class="profit {{#if isGreaterThan totalProfitNumber 0}}green-light{{else}}red-light{{/if}}">{{portfolioTotal true}}</span>
			{{/if}}
			<span class="bitcoin-price">1 BTC = {{btcPrice}}</span>
		</div>

		<nav>
			<ul>
				<li><a href="{{pathFor 'home'}}">Home</a></li>
				<li><a href="{{pathFor 'dashboard'}}">Dashboard</a></li>
				<li>|</li>
				{{> accountButtons}}
			</ul>
		</nav>
	</header>
	<main class="content">
		{{> yield}}

		{{#unless subscriptionReady}}
			{{> layout_loading}}
		{{/unless}}
	</main>
</template>

<template name="layout_loading">
	{{#AnimateWithVelocity}}
		<div class="loading-container" data-animate data-property="opacity" data-duration="200" data-from-value="0" data-to-value="1">
			<h1 class="loading-text">Loading...</h1>
		</div>
	{{/AnimateWithVelocity}}
</template>